---
export interface Props {
  title?: string;
  subtitle?: string;
  image?: ImageMetadata;

  className?: string;
  id?: string;
  "aria-label"?: string;
}

const {
  title,
  subtitle,
  image,

  className = "",
  id,
  "aria-label": ariaLabel,
} = Astro.props;
---

<div
  class={`${!image ? "py-8 sm:py-10" : ""} ${className}`}
  id={id ?? title}
  aria-label={ariaLabel || title}
>
  {
    image && title ? (
      <div class="relative w-full h-64 sm:h-80 mb-6 sm:mb-8 rounded-t-lg overflow-hidden">
        <a href={`#${id ?? title}`} class="group block w-full h-full">
          <img
            src={image.src}
            alt={title}
            class="w-full h-full object-cover transition-transform duration-200 group-hover:scale-105"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent" />
          <div class="absolute bottom-0 left-0 p-4 sm:p-6">
            <h2 class="title text-xl sm:text-2xl lg:text-3xl text-white cursor-pointer transition-colors duration-200 relative">
              <svg
                class="absolute -right-6 top-[55%] transform -translate-y-1/2 w-5 h-5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
                />
              </svg>
              {title}
            </h2>
            {subtitle && (
              <p class="text-base sm:text-lg text-white/90 mt-2">{subtitle}</p>
            )}
          </div>
        </a>
      </div>
    ) : title ? (
      <div class="text-center mb-6 sm:mb-8">
        <a href={`#${id ?? title}`} class="group inline-block">
          <h2 class="title mb-4 text-lg sm:text-xl text-accent-two cursor-pointer transition-colors duration-200 relative">
            <svg
              class="absolute -left-6 top-[55%] transform -translate-y-1/2 w-4 h-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"
              />
            </svg>
            {title}
          </h2>
        </a>
        {subtitle && (
          <p class="text-base sm:text-lg text-accent-two">{subtitle}</p>
        )}
      </div>
    ) : null
  }

  <div class={!image ? "" : "py-8 sm:py-10"}>
    <slot />
  </div>
</div>
